<?xml version="1.0"?>
  <database name="VIEW M_INOUT_LINE_V">
    <view name="M_INOUT_LINE_V"><![CDATA[SELECT iol.ad_client_id, iol.ad_org_id, iol.isactive, iol.created, iol.createdby, iol.updated, iol.updatedby, 'en_US' AS ad_language, iol.m_inout_id, iol.m_inoutline_id, iol.line, iol.movementqty, uom.uomsymbol, COALESCE(p.name, iol.description) AS name, 
CASE
WHEN p.name IS NOT NULL THEN iol.description
ELSE NULL
END AS description, p.documentnote, p.upc, p.sku, p.value AS productvalue, iol.m_locator_id
FROM m_inoutline iol
JOIN c_uom uom ON iol.c_uom_id = uom.c_uom_id
LEFT JOIN m_product p ON iol.m_product_id = p.m_product_id
UNION 
SELECT iol.ad_client_id, iol.ad_org_id, iol.isactive, iol.created, iol.createdby, iol.updated, iol.updatedby, 'en_US' AS ad_language, iol.m_inout_id, iol.m_inoutline_id, iol.line + b.line / 100 AS line, iol.movementqty * b.bomqty AS movementqty, uom.uomsymbol, p.name, b.description, p.documentnote, p.upc, p.sku, p.value AS productvalue, iol.m_locator_id
FROM m_product_bom b
JOIN m_inoutline iol ON b.m_product_id = iol.m_product_id
JOIN m_product bp ON bp.m_product_id = iol.m_product_id AND bp.isbom = 'Y' AND bp.isverified = 'Y' AND bp.ispicklistprintdetails = 'Y'
JOIN m_product p ON b.m_productbom_id = p.m_product_id
JOIN c_uom uom ON p.c_uom_id = uom.c_uom_id
]]></view>
  </database>
